!(function () {
  "use strict";
  function n(e) {
    return (n =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function (e) {
            return typeof e;
          }
        : function (e) {
            return e &&
              "function" == typeof Symbol &&
              e.constructor === Symbol &&
              e !== Symbol.prototype
              ? "symbol"
              : typeof e;
          })(e);
  }
  function o(e, t) {
    if (!(e instanceof t))
      throw new TypeError("Cannot call a class as a function");
  }
  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var o = t[n];
      (o.enumerable = o.enumerable || !1),
        (o.configurable = !0),
        "value" in o && (o.writable = !0),
        Object.defineProperty(e, o.key, o);
    }
  }
  function i(e, t, n) {
    t && r(e.prototype, t),
      n && r(e, n),
      Object.defineProperty(e, "prototype", { writable: !1 });
  }
  function e() {
    var e = Array.prototype.slice.call(arguments),
      t = e.shift();
    t === h.INIT
      ? 0 === Object.keys(k).length ||
        (0 < Object.keys(k).length && (Date.now() - lti.l) / 1e3 < b)
        ? (k[e[0]] = e[0])
        : console.warn("Late init of tracking id not supported.")
      : 0 < Object.keys(k).length
      ? S(t, e)
      : console.warn("No tracking id set; event skipped.");
  }
  function t() {
    if (!w) {
      for (w = !0; 0 < lti.q.length; ) e.apply(this, lti.q.shift());
      w = !1;
    }
  }
  var l,
    a,
    u,
    c = (function () {
      function e() {
        o(this, e);
      }
      return (
        i(e, null, [
          {
            key: "nameAndVersion",
            value: function () {
              var e,
                t = navigator.userAgent,
                n =
                  t.match(
                    /(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i
                  ) || [];
              return /trident/i.test(n[1])
                ? "IE " + ((e = /\brv[ :]+(\d+)/g.exec(t) || [])[1] || "")
                : "Chrome" === n[1] &&
                  null != (e = t.match(/\b(OPR|Edge)\/(\d+)/))
                ? e.slice(1).join(" ").replace("OPR", "Opera")
                : ((n = n[2]
                    ? [n[1], n[2]]
                    : [navigator.appName, navigator.appVersion, "-?"]),
                  null != (e = t.match(/version\/(\d+)/i)) &&
                    n.splice(1, 1, e[1]),
                  n.join(" "));
            },
          },
          {
            key: "isMobile",
            value: function () {
              return "ontouchstart" in document;
            },
          },
          {
            key: "userAgent",
            value: function () {
              return window.navigator.userAgent;
            },
          },
        ]),
        e
      );
    })(),
    s = (function () {
      function t() {
        o(this, t);
      }
      return (
        i(t, null, [
          {
            key: "isPresent",
            value: function (e) {
              return null != e && "" !== e;
            },
          },
          {
            key: "now",
            value: function () {
              return +new Date();
            },
          },
          {
            key: "getBaseTime",
            value: function () {
              return lti.l;
            },
          },
          {
            key: "getUrlParam",
            value: function (e) {
              for (
                var t = window.location.search
                    .substr(1, window.location.search.length)
                    .split("&"),
                  n = [],
                  o = 0;
                o < t.length;
                o += 1
              ) {
                var r = t[0].split("=");
                n[r[0]] = decodeURIComponent(r[1]);
              }
              return n[e];
            },
          },
          {
            key: "optionalData",
            value: function (e) {
              return !1 === t.isPresent(e)
                ? ""
                : "object" === n(e)
                ? t.optionalData(JSON.stringify(e))
                : "function" == typeof e
                ? t.optionalData(e())
                : String(e);
            },
          },
        ]),
        t
      );
    })(),
    d =
      ((l = s),
      (a = "uuid"),
      (u = (function () {
        for (var t, n = [], e = 0; e < 256; ++e)
          n.push((e + 256).toString(16).substr(1));
        var o = new Uint8Array(16);
        return function () {
          var e = (function () {
            if (
              (t =
                t ||
                ("undefined" != typeof crypto &&
                  crypto.getRandomValues &&
                  crypto.getRandomValues.bind(crypto)) ||
                ("undefined" != typeof msCrypto &&
                  "function" == typeof msCrypto.getRandomValues &&
                  msCrypto.getRandomValues.bind(msCrypto)))
            )
              return t(o);
            throw new Error(
              "crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported"
            );
          })();
          return (
            (e[6] = (15 & e[6]) | 64),
            (e[8] = (63 & e[8]) | 128),
            (function (e, t) {
              return (
                n[e[(t = 1 < arguments.length && void 0 !== t ? t : 0) + 0]] +
                n[e[t + 1]] +
                n[e[t + 2]] +
                n[e[t + 3]] +
                "-" +
                n[e[t + 4]] +
                n[e[t + 5]] +
                "-" +
                n[e[t + 6]] +
                n[e[t + 7]] +
                "-" +
                n[e[t + 8]] +
                n[e[t + 9]] +
                "-" +
                n[e[t + 10]] +
                n[e[t + 11]] +
                n[e[t + 12]] +
                n[e[t + 13]] +
                n[e[t + 14]] +
                n[e[t + 15]]
              ).toLowerCase();
            })(e)
          );
        };
      })()),
      a in l
        ? Object.defineProperty(l, a, {
            value: u,
            enumerable: !0,
            configurable: !0,
            writable: !0,
          })
        : (l[a] = u),
      (function () {
        function e() {
          o(this, e);
        }
        return (
          i(e, null, [
            {
              key: "get",
              value: function (e) {
                e += "=";
                for (
                  var t = document.cookie.split(";"), n = 0;
                  n < t.length;
                  n++
                ) {
                  for (var o = t[n]; " " == o.charAt(0); ) o = o.substring(1);
                  if (0 == o.indexOf(e)) return o.substring(e.length, o.length);
                }
              },
            },
          ]),
          e
        );
      })()),
    f = (function () {
      function r() {
        o(this, r);
      }
      return (
        i(r, null, [
          {
            key: "sendEvent",
            value: function (t, n, o) {
              o = o || function () {};
              var e = !1;
              if (
                navigator &&
                navigator.sendBeacon &&
                "function" == typeof navigator.sendBeacon &&
                navigator.sendBeacon(t, JSON.stringify(n))
              )
                (e = !0),
                  setTimeout(function () {
                    o(null);
                  }, 1e3);
              else if (!e && window.fetch)
                try {
                  fetch(t, {
                    method: "POST",
                    mode: "cors",
                    cache: "no-cache",
                    keepalive: !0,
                    headers: { "Content-Type": "application/json" },
                    redirect: "follow",
                    body: JSON.stringify(n),
                  })
                    .then(function (e) {
                      if (e.ok) return e.json();
                      throw new Error("Response from server not ok.");
                    })
                    .then(function () {
                      o(null);
                    })
                    .catch(function () {
                      r.doTraditionalXHR(t, n, o);
                    });
                } catch (e) {
                  r.doTraditionalXHR(t, n, o);
                }
              else e || r.doTraditionalXHR(t, n, o);
            },
          },
          {
            key: "doTraditionalXHR",
            value: function (e, t, n) {
              var o = new window.XMLHttpRequest();
              o.open("POST", e, !0),
                o.setRequestHeader("Content-Type", "application/json"),
                (o.onreadystatechange = function () {
                  if (4 === this.readyState)
                    if (200 <= this.status && this.status < 400)
                      try {
                        if (200 !== JSON.parse(this.response).statusCode)
                          throw new Error("Invalid response code from server");
                        n(null);
                      } catch (e) {
                        n(e);
                      }
                    else n(new Error("Server responded with error"), null);
                }),
                o.send(JSON.stringify(t));
            },
          },
        ]),
        r
      );
    })(),
    g = "ltClientClickId",
    m = "ltClientClickIdTs",
    p = "ltPreviousClientClickId",
    v = "ltPreviousClientClickIdTs",
    y = (function () {
      function t() {
        o(this, t);
      }
      return (
        i(t, null, [
          {
            key: "setClientClickId",
            value: function (e) {
              var t, n;
              e &&
                ((t = localStorage.getItem(g)),
                (n = localStorage.getItem(m)),
                void 0 !== t &&
                  t !== e &&
                  (localStorage.setItem(p, t), localStorage.setItem(v, n)),
                localStorage.setItem(g, e),
                localStorage.setItem(m, s.now()));
            },
          },
          {
            key: "getClientClickId",
            value: function () {
              return localStorage.getItem(g);
            },
          },
          {
            key: "getPreviousClientClickId",
            value: function () {
              return localStorage.getItem(p);
            },
          },
          {
            key: "getClientClickIdTs",
            value: function () {
              return localStorage.getItem(m);
            },
          },
          {
            key: "getPreviousClientClickIdTs",
            value: function () {
              return localStorage.getItem(v);
            },
          },
          {
            key: "removeURLParameter",
            value: function (e, t) {
              var n = e.split("?");
              if (2 <= n.length) {
                for (
                  var o = encodeURIComponent(t) + "=",
                    r = n[1].split(/[&;]/g),
                    i = r.length;
                  0 < i--;

                )
                  -1 !== r[i].lastIndexOf(o, 0) && r.splice(i, 1);
                return n[0] + (0 < r.length ? "?" + r.join("&") : "");
              }
              return e;
            },
          },
          {
            key: "build",
            value: function () {
              var e = s.now();
              return {
                clientClickId: t.getClientClickId(),
                clientClickIdTs: t.getClientClickIdTs(),
                previousClientClickId: t.getPreviousClientClickId(),
                previousClientClickIdTs: t.getPreviousClientClickIdTs(),
                v: "1",
                dl: t.removeURLParameter(window.location.href, "ltclid"),
                rl: document.referrer,
                tl: s.getBaseTime(),
                ts: e,
                td: s.getBaseTime() - e,
                de: document.characterSet,
                sr: window.screen.width + "x" + window.screen.height,
                vp: window.innerWidth + "x" + window.innerHeight,
                cd: window.screen.colorDepth,
                dt: document.title,
                bn: c.nameAndVersion(),
                md: c.isMobile(),
                ua: c.userAgent(),
                tz: new Date().getTimezoneOffset(),
                utm_source: d.get("utm_source") || "",
                utm_medium: d.get("utm_medium") || "",
                utm_term: d.get("utm_term") || "",
                utm_content: d.get("utm_content") || "",
                utm_campaign: d.get("utm_campaign") || "",
                ltm_source: s.getUrlParam("ltm_source") || "",
                ltm_medium: s.getUrlParam("ltm_medium") || "",
                ltm_campaign: s.getUrlParam("ltm_campaign") || "",
              };
            },
          },
        ]),
        t
      );
    })(),
    h = { INIT: "init" },
    k = {},
    w = !1,
    C = "https://ltp.linktr.ee/stream",
    b = 10,
    I =
      (window.addEventListener("unload", function () {
        if (k)
          for (var e = Object.keys(k), t = 0; t < e.length; t += 1)
            f.sendEvent(C, I(e[t], "pageunloaded"));
      }),
      function (e, t, n) {
        n = n && void 0 !== n.length && 1 === n.length ? n[0] : n;
        return {
          eventName: ["ltpixel", t].join("."),
          context: y.build(),
          pixelId: e,
          data: !n || (void 0 !== n.length && 0 === n.length) ? null : n,
          id: s.uuid(),
        };
      }),
    S = function (e, t) {
      for (var n = Object.keys(k), o = 0; o < n.length; o += 1)
        f.sendEvent(C, I(n[o], e, t));
    };
  y.setClientClickId(s.getUrlParam("ltclid")), t(), setInterval(t, 200);
})();
